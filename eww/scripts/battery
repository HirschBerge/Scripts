#!/usr/bin/env bash


## Get Battery 
get_percentage() {
  while true; do
    # BAT=$(ls /sys/class/power_supply | grep BAT | head -n 1) #For laptop
    BAT="hidpp_battery_0"
    echo "$(cat /sys/class/power_supply/${BAT}/capacity)%"
    sleep 3
  done
}

## Get Battery Icon
get_icon() {
  while true; do
    BAT="hidpp_battery_0"
    # BAT=$(ls /sys/class/power_supply | grep BAT | head -n 1)
    BATSTATUS="$(cat /sys/class/power_supply/${BAT}/status)"
    BATVAL="$(cat /sys/class/power_supply/${BAT}/capacity)"

    if [[ "$BATSTATUS" == "Discharging" ]];then
      name="üñ±Ô∏è"
      if [ "$BATVAL" -gt 90 ];then
        echo "${name}Ôï∏"
      elif [ "$BATVAL" -gt 80 ];then
        echo "ÔñÅ"
      elif [ "$BATVAL" -gt 70 ];then
        echo "ÔñÄ"
      elif [ "$BATVAL" -gt 60 ];then
        echo "Ôïø"
      elif [ "$BATVAL" -gt 50 ];then
        echo "Ôïæ"
      elif [ "$BATVAL" -gt 40 ];then
        echo "ÔïΩ"
      elif [ "$BATVAL" -gt 30 ];then
        echo "Ôïº"
      elif [ "$BATVAL" -gt 20 ];then
        echo "Ôïª"
      elif [ "$BATVAL" -gt 10 ];then
        echo "Ôï∫"
      elif [ "$BATVAL" -gt 0 ];then
        echo "Ôïπ"
      fi
     else
      echo "ÔñÉ"
    fi
    sleep 3
  done
}


if [[ "$1" == "--perc" ]]; then
	get_percentage
elif [[ "$1" == "--icon" ]]; then
	get_icon taco
fi

