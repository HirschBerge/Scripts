{ pkgs, lib, ... }:

{
  xsession.windowManager.i3 = {
    enable = true;
    package = pkgs.i3-gaps;

    config = rec {
      modifier = "Mod4";
      bars = {};

      window.border = 0;

      gaps = {
        inner = 3;
        outer = 3;
      };

      keybindings = lib.mkOptionDefault {
        "${modifier}+Shift+space" = "floating toggle";
        "${modifier}+space" = "focus mode_toggle";
        "${modifier}+Shift+t" = "exec ${pkgs.rofi}/bin/rofi -show window";
        "${modifier}+u" = "exec ${pkgs.brave}/bin/brave";
        "${modifier}+Shift+x" = "exec systemctl suspend";
        "${modifier}+o" = "[con_id=\"__focused__\" instance=\"^(?!dropdown_).*$\"] kill";
        "${modifier}+Tab" = "workspace back_and_forth";

      };
      initExtra = ''
        set $monitor1 "DP-2"
        set $monitor2 "DP-0"

        set $ws1 "1: Main"
        set $ws2 "2: Steam"
        set $ws3 "3: Games"
        set $ws4 "4: Streaming"
        set $ws5 "5: Open"
        set $ws6 "6: Audio"
        set $ws7 "7: Discord etc."
        set $ws8 "8: Videos"
        set $ws9 "9: Teams"
        set $ws10 "10"
        workspace $ws1 output $monitor1
        workspace $ws2 output $monitor1
        workspace $ws3 output $monitor1
        workspace $ws4 output $monitor1
        workspace $ws5 output $monitor1
        workspace $ws6 output $monitor2
        workspace $ws7 output $monitor2
        workspace $ws8 output $monitor2
        workspace $ws9 output $monitor2
        workspace $ws10 output $monitor2
      '';
      startup = [
        {
          command = "exec i3-msg workspace 1";
          always = true;
          notification = false;
        }
        {
          command = "/home/hirschy/.config/i3/launcher.sh";
          always = true;
          notification = false;
        }
        {
          command = "${pkgs.feh}";
          always = true;
          notification = false;
        }
      ];
    };
  };
}